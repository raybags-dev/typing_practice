"use strict";import{text_source}from"./public/resource.js";const testWrapper=document.querySelector(".test-wrapper");const testArea=document.querySelector("#test-area");const originText=document.querySelector("#origin-text p");const text_main_container=document.querySelector(".hand_container");const heading=document.querySelector("#head_text");const heading_icon=document.querySelector(".fas");const contentConctainer=document.querySelector("#content_container");const errorText=document.querySelector("#err");const remove_error=document.querySelector("#error_icon");const originTextContainer=document.querySelector("#origin-text");const resetButton=document.querySelector("#reset");const theTimer=document.querySelector(".timer");const btnValue=document.getElementById("badge_value");const giveMeText=document.querySelector(".hand");const alertSuccess=document.querySelector("#alert_success");$((function(){$('[data-toggle="tooltip"]').tooltip()}));$(window).on("load",(function(){heading.classList.remove("hide");heading_icon.classList.remove("hide");heading.classList.add("fadeIn");heading_icon.classList.add("pulse");heading_icon.classList.add("slower");heading_icon.classList.add("infinite");testWrapper.classList.add("slower");originText.classList.add("fadeIn");originText.classList.add("slower");text_main_container.classList.add("fadeIn");text_main_container.classList.add("slower");testWrapper.style.cssText="border: .4rem solid #967070;"}));function createText(){let result=Object.values(text_source);let textIndex=Math.floor(Math.random()*101);return result[textIndex]}class Text{constructor(text){this.text=text}renderText=function(){return originText.innerHTML=createText()}}const state=new Text;let text_result=state.renderText();let paragragh_text=document.querySelector("#origin-text p").textContent=text_result;var timerRunning;var my_interval=false;let timer=[0,0,0,0];function leadingZero(time){if(time<=9){time="0"+time}return time}function runOnPasteError(){contentConctainer.classList.add("hide");errorText.classList.remove("hide2")}function clearError(){errorText.classList.add("hide2");contentConctainer.classList.remove("hide")}function flashTimer(){theTimer.classList.toggle(".green");originTextContainer.classList.add("green_border")}function showAlertSuccess(){alertSuccess.classList.remove("slideOutUp");alertSuccess.classList.remove("hide");alertSuccess.classList.add("fadeInDown")}function removeAlertSuccess(){alertSuccess.classList.add("hide")}function runTimer(){let currentTimer=`${leadingZero(timer[0])}:${leadingZero(timer[1])}:${leadingZero(timer[2])}`;theTimer.innerHTML=currentTimer;timer[3]++;timer[0]=Math.floor(timer[3]/100/60);timer[1]=Math.floor(timer[3]/100-timer[0]*60);timer[2]=Math.floor(timer[3]-timer[1]*100-timer[0]*6e3)}function spellCheck(){let textEntered=testArea.value;let originTextMatch=paragragh_text.substring(0,textEntered.length);if(textEntered==paragragh_text){let flashInterval=setInterval(flashTimer,200);showAlertSuccess();confetti.start(2e3,50);theTimer.classList.add("green");theTimer.classList.add("flash");theTimer.style.cssText="color: #FFFFFF";originTextContainer.classList.toggle("matched");setTimeout((()=>{clearInterval(flashInterval);flashInterval=null}),1e3);clearInterval(my_interval);testWrapper.style.borderColor="#008000"}else if(textEntered==originTextMatch){testWrapper.style.borderColor="#65CCf3";theTimer.style.cssText="color: #FFFFFF"}else{testWrapper.style.borderLeftColor="#f32424";testWrapper.style.borderRightColor="#f32424";theTimer.style.cssText="color: #750d0d";testWrapper.style.transition=".4s"}}function start(){let text_entered_length=testArea.value.length;if(text_entered_length===0&&!timerRunning){timerRunning=true;my_interval=setInterval(runTimer,10)}btnValue.innerText=text_entered_length+1}function reset(){clearInterval(my_interval);my_interval=null;setTimeout((()=>{removeAlertSuccess()}),2e3);alertSuccess.classList.add("slideOutUp");confetti.stop();timer=[0,0,0,0];timerRunning=false;resetButton.classList.remove("green_border");resetButton.classList.add("green_border");testArea.value="";theTimer.classList.remove("flash");theTimer.innerHTML="00:00:00";btnValue.innerText="";theTimer.style.cssText="";theTimer.classList.remove("green");testWrapper.style.cssText="border: 7px solid  #967070; display: flex; justify-content: center; align-items: center; text-align: center;";originTextContainer.classList.remove("green_border")}testArea.addEventListener("keypress",start,true);testArea.addEventListener("keyup",spellCheck,true);testArea.addEventListener("paste",runOnPasteError,false);remove_error.addEventListener("click",clearError,false);giveMeText.addEventListener("click",(()=>{if(timerRunning){testArea.classList.add("flash");testArea.classList.toggle("red_border");setTimeout((()=>{testArea.classList.add("flash");testArea.classList.toggle("red_border")}),100);return}let x=state.renderText();paragragh_text=x}),true);resetButton.addEventListener("click",(function(){reset()}),false);